# è®­ç»ƒæ–­ç‚¹ç»­è®­æŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•ä½¿ç”¨æ–°å¢çš„checkpointåŠŸèƒ½æ¥å®ç°è®­ç»ƒçš„æ–­ç‚¹ç»­è®­ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **è‡ªåŠ¨checkpointä¿å­˜**: æ¯Nä¸ªepochè‡ªåŠ¨ä¿å­˜è®­ç»ƒçŠ¶æ€
- **æœ€æ–°çŠ¶æ€ä¿å­˜**: æ¯ä¸ªepochéƒ½ä¿å­˜æœ€æ–°çŠ¶æ€
- **å®Œæ•´çŠ¶æ€æ¢å¤**: åŒ…æ‹¬æ¨¡å‹æƒé‡ã€ä¼˜åŒ–å™¨çŠ¶æ€ã€è°ƒåº¦å™¨çŠ¶æ€ã€è®­ç»ƒå†å²ç­‰
- **æ•°æ®ç¼“å­˜**: é¢„å¤„ç†æ•°æ®è‡ªåŠ¨ç¼“å­˜ï¼Œæ¢å¤æ—¶æ— éœ€é‡æ–°å¤„ç†
- **çµæ´»çš„æ¢å¤é€‰é¡¹**: æ”¯æŒä»ä»»æ„checkpointæ¢å¤

## ğŸ“ æ–‡ä»¶ç»“æ„

```
./checkpoints/                     # checkpointç›®å½•
â”œâ”€â”€ checkpoint_latest.pth          # æœ€æ–°çš„è®­ç»ƒçŠ¶æ€ï¼ˆæ¯ä¸ªepochæ›´æ–°ï¼‰
â”œâ”€â”€ checkpoint_epoch_5.pth         # ç¬¬5ä¸ªepochçš„checkpoint
â”œâ”€â”€ checkpoint_epoch_10.pth        # ç¬¬10ä¸ªepochçš„checkpoint
â””â”€â”€ ...

./processed_data.npz               # ç¼“å­˜çš„é¢„å¤„ç†æ•°æ®
./training.log                     # è®­ç»ƒæ—¥å¿—
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. æ­£å¸¸è®­ç»ƒï¼ˆæ”¯æŒcheckpointï¼‰

```bash
# ä»å¤´å¼€å§‹è®­ç»ƒï¼Œæ¯5ä¸ªepochä¿å­˜ä¸€æ¬¡checkpoint
python Training.py

# è‡ªå®šä¹‰checkpointä¿å­˜é¢‘ç‡ï¼ˆæ¯3ä¸ªepochä¿å­˜ä¸€æ¬¡ï¼‰
python Training.py --checkpoint-freq 3
```

### 2. æ¢å¤è®­ç»ƒçš„å‡ ç§æ–¹å¼

#### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨æ¢å¤ï¼ˆæ¨èï¼‰
```bash
# ä½¿ç”¨å¿«é€Ÿæ¢å¤è„šæœ¬ï¼Œè‡ªåŠ¨æ‰¾åˆ°æœ€æ–°checkpoint
python resume_training.py
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æŒ‡å®šcheckpoint
```bash
# ä»æœ€æ–°checkpointæ¢å¤
python Training.py --resume ./checkpoints/checkpoint_latest.pth

# ä»ç‰¹å®šepochçš„checkpointæ¢å¤
python Training.py --resume ./checkpoints/checkpoint_epoch_10.pth
```

#### æ–¹å¼ä¸‰ï¼šæŸ¥çœ‹æ‰€æœ‰å¯ç”¨checkpoint
```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„checkpointæ–‡ä»¶
python resume_training.py --list
```

### 3. è®­ç»ƒæ„å¤–ä¸­æ–­åçš„æ¢å¤æ­¥éª¤

1. **æ£€æŸ¥checkpointçŠ¶æ€**ï¼š
   ```bash
   python resume_training.py --list
   ```

2. **é€‰æ‹©æ¢å¤æ–¹å¼**ï¼š
   - å¦‚æœè¦ä»æœ€æ–°çŠ¶æ€æ¢å¤ï¼š`python resume_training.py`
   - å¦‚æœè¦ä»ç‰¹å®šepochæ¢å¤ï¼š`python Training.py --resume ./checkpoints/checkpoint_epoch_X.pth`

3. **éªŒè¯æ¢å¤æˆåŠŸ**ï¼š
   - æ£€æŸ¥æ—¥å¿—ä¸­çš„"æ¢å¤è®­ç»ƒï¼Œä» epoch X å¼€å§‹"ä¿¡æ¯
   - ç¡®è®¤å½“å‰æœ€ä½³ç›¸å…³ç³»æ•°æ­£ç¡®æ˜¾ç¤º

## ğŸ“Š checkpointåŒ…å«çš„ä¿¡æ¯

æ¯ä¸ªcheckpointæ–‡ä»¶åŒ…å«ï¼š
- `epoch`: å½“å‰epochç¼–å·
- `model_state_dict`: æ¨¡å‹æƒé‡
- `optimizer_state_dict`: ä¼˜åŒ–å™¨çŠ¶æ€
- `scheduler_state_dict`: å­¦ä¹ ç‡è°ƒåº¦å™¨çŠ¶æ€
- `train_losses`: è®­ç»ƒæŸå¤±å†å²
- `val_losses`: éªŒè¯æŸå¤±å†å²
- `aucs`: ç›¸å…³ç³»æ•°å†å²
- `best_corr`: æœ€ä½³ç›¸å…³ç³»æ•°
- `best_epoch`: æœ€ä½³epochç¼–å·
- `timestamp`: ä¿å­˜æ—¶é—´æˆ³

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸€è‡´æ€§**: æ¢å¤è®­ç»ƒæ—¶ç¡®ä¿ä½¿ç”¨ç›¸åŒçš„æ•°æ®æ–‡ä»¶
2. **ç¯å¢ƒä¸€è‡´æ€§**: ä¿æŒPythonç¯å¢ƒå’Œä¾èµ–ç‰ˆæœ¬ä¸€è‡´
3. **ç£ç›˜ç©ºé—´**: checkpointæ–‡ä»¶è¾ƒå¤§ï¼Œæ³¨æ„ç£ç›˜ç©ºé—´
4. **å®šæœŸæ¸…ç†**: å¯ä»¥åˆ é™¤è¾ƒæ—©çš„checkpointæ–‡ä»¶ä»¥èŠ‚çœç©ºé—´

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1: æ‰¾ä¸åˆ°checkpointæ–‡ä»¶
```bash
# æ£€æŸ¥checkpointsç›®å½•
ls -la ./checkpoints/

# æ£€æŸ¥æ˜¯å¦æœ‰é¢„å¤„ç†æ•°æ®ç¼“å­˜
ls -la ./processed_data.npz
```

### é—®é¢˜2: checkpointåŠ è½½å¤±è´¥
- ç¡®è®¤checkpointæ–‡ä»¶æ²¡æœ‰æŸå
- æ£€æŸ¥Pythonç¯å¢ƒå’Œä¾èµ–ç‰ˆæœ¬
- æŸ¥çœ‹è®­ç»ƒæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### é—®é¢˜3: æ¢å¤åæ€§èƒ½ä¸ä¸€è‡´
- ç¡®è®¤ä½¿ç”¨ç›¸åŒçš„æ•°æ®æ–‡ä»¶
- æ£€æŸ¥éšæœºç§å­è®¾ç½®
- éªŒè¯æ¨¡å‹æ¶æ„æ²¡æœ‰å˜åŒ–

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸä¿å­˜**: ä½¿ç”¨åˆé€‚çš„checkpointé¢‘ç‡ï¼ˆæ¨è3-5ä¸ªepochï¼‰
2. **ç›‘æ§ç£ç›˜**: å®šæœŸæ¸…ç†æ—§çš„checkpointæ–‡ä»¶
3. **å¤‡ä»½é‡è¦checkpoint**: å°†å…³é”®çš„checkpointæ–‡ä»¶å¤‡ä»½åˆ°å…¶ä»–ä½ç½®
4. **è®°å½•è®­ç»ƒå‚æ•°**: åœ¨æ—¥å¿—ä¸­è®°å½•é‡è¦çš„è®­ç»ƒå‚æ•°ä»¥ä¾¿å¤ç°

## ğŸ“ ç¤ºä¾‹åœºæ™¯

### åœºæ™¯1: è®­ç»ƒåœ¨ç¬¬15ä¸ªepochæ„å¤–ä¸­æ–­
```bash
# 1. æŸ¥çœ‹å¯ç”¨checkpoint
python resume_training.py --list

# 2. è‡ªåŠ¨æ¢å¤ï¼ˆä»æœ€æ–°çŠ¶æ€ç»§ç»­ï¼‰
python resume_training.py

# è®­ç»ƒå°†ä»ç¬¬16ä¸ªepochå¼€å§‹ç»§ç»­
```

### åœºæ™¯2: æƒ³ä»ç¬¬10ä¸ªepoché‡æ–°è®­ç»ƒ
```bash
# ä»ç‰¹å®šcheckpointæ¢å¤
python Training.py --resume ./checkpoints/checkpoint_epoch_10.pth

# è®­ç»ƒå°†ä»ç¬¬11ä¸ªepochå¼€å§‹
```

### åœºæ™¯3: æ›´æ”¹checkpointä¿å­˜é¢‘ç‡
```bash
# æ¯2ä¸ªepochä¿å­˜ä¸€æ¬¡ï¼ˆæ›´é¢‘ç¹ï¼‰
python Training.py --checkpoint-freq 2

# æ¯10ä¸ªepochä¿å­˜ä¸€æ¬¡ï¼ˆèŠ‚çœç©ºé—´ï¼‰
python Training.py --checkpoint-freq 10
```

---

é€šè¿‡è¿™ä¸ªcheckpointç³»ç»Ÿï¼Œä½ å¯ä»¥å®‰å…¨åœ°è¿›è¡Œé•¿æ—¶é—´è®­ç»ƒï¼Œä¸ç”¨æ‹…å¿ƒæ„å¤–ä¸­æ–­å¯¼è‡´çš„è®­ç»ƒè¿›åº¦ä¸¢å¤±ï¼